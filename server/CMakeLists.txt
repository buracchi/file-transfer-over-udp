find_package(buracchi-common CONFIG REQUIRED)

add_executable(ft-server "src/main.c")
target_link_libraries(ft-server PRIVATE ft-service)
target_link_libraries(ft-server PRIVATE buracchi::common::argparser)
target_link_libraries(ft-server PRIVATE buracchi::common::networking)
target_link_libraries(ft-server PRIVATE buracchi::common::utilities)
#target_link_libraries(server PRIVATE tproto-gbn)
target_link_libraries(ft-server INTERFACE coverage_config)

add_library(ft-service STATIC "src/ft_service.c")
target_link_libraries(ft-service PRIVATE ftcp)
target_link_libraries(ft-service PRIVATE buracchi::common::concurrency)
target_link_libraries(ft-service PRIVATE buracchi::common::logger)
target_link_libraries(ft-service PRIVATE buracchi::common::networking)
target_link_libraries(ft-service PRIVATE buracchi::common::utilities)
target_link_libraries(ft-service INTERFACE coverage_config)
